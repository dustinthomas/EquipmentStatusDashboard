<div class="page-header">
    <h1>Equipment Status Dashboard</h1>
    <p><%= @vars(:tool_count) %> active tools</p>
</div>

<div class="card dashboard-card">
    <% if isempty(@vars(:tools)) %>
        <p class="text-center">No tools found.</p>
    <% else %>
        <div class="table-container">
            <table class="table dashboard-table">
                <thead>
                    <tr>
                        <th>Name</th>
                        <th>Area</th>
                        <th>Status</th>
                        <th>Issue</th>
                        <th>ETA to Up</th>
                        <th>Last Updated</th>
                        <th>Updated By</th>
                    </tr>
                </thead>
                <tbody>
                    <% for tool in @vars(:tools) %>
                        <tr class="tool-row tool-row-<%= tool[:state_class] %>" onclick="window.location='/tools/<%= tool[:id] %>'">
                            <td class="tool-name"><%= tool[:name] %></td>
                            <td><%= tool[:area] %></td>
                            <td>
                                <span class="status-badge <%= tool[:state_class] %>">
                                    <%= tool[:state_display] %>
                                </span>
                            </td>
                            <td class="issue-cell" title="<%= tool[:full_issue] %>">
                                <%= tool[:issue] %>
                            </td>
                            <td><%= tool[:eta] %></td>
                            <td><%= tool[:updated_at] %></td>
                            <td><%= tool[:updated_by] %></td>
                        </tr>
                    <% end %>
                </tbody>
            </table>
        </div>
    <% end %>
</div>
