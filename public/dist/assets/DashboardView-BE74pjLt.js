import{_ as h,u as _,o as r,c as i,a as t,w as S,v as w,b as e,d as $,F as y,r as k,t as c,e as x,f as N,g as F,n as T,h as g,i as U,j as v,k as m,l as b,m as A,p as I}from"./index-BDGxoy4u.js";import{_ as D}from"./StatusBadge-1-ZXL-0m.js";import{E}from"./EmptyState-CjGN3KU0.js";const M={class:"card filter-card"},V={class:"filter-row"},B={class:"filter-group"},L={class:"filter-group"},P=["value"],W={class:"filter-group filter-group-search"},q={class:"filter-group filter-group-buttons"},j=["disabled"],z={__name:"FilterBar",setup(u){const a=_();function o(){a.applyFilters()}return(f,l)=>(r(),i("div",M,[t("form",{onSubmit:F(o,["prevent"]),class:"filter-form"},[t("div",V,[t("div",B,[l[8]||(l[8]=t("label",{class:"filter-label"},"Status",-1)),S(t("select",{"onUpdate:modelValue":l[0]||(l[0]=d=>e(a).filters.state=d),class:"form-select filter-select",onChange:l[1]||(l[1]=d=>e(a).applyFilters())},[...l[7]||(l[7]=[$('<option value="" data-v-972f7309>All Statuses</option><option value="UP" data-v-972f7309>Up</option><option value="UP_WITH_ISSUES" data-v-972f7309>Up with Issues</option><option value="MAINTENANCE" data-v-972f7309>Maintenance</option><option value="DOWN" data-v-972f7309>Down</option>',5)])],544),[[w,e(a).filters.state]])]),t("div",L,[l[10]||(l[10]=t("label",{class:"filter-label"},"Area",-1)),S(t("select",{"onUpdate:modelValue":l[2]||(l[2]=d=>e(a).filters.area=d),class:"form-select filter-select",onChange:l[3]||(l[3]=d=>e(a).applyFilters())},[l[9]||(l[9]=t("option",{value:""},"All Areas",-1)),(r(!0),i(y,null,k(e(a).meta.areas,d=>(r(),i("option",{key:d,value:d},c(d),9,P))),128))],544),[[w,e(a).filters.area]])]),t("div",W,[l[11]||(l[11]=t("label",{class:"filter-label"},"Search",-1)),S(t("input",{type:"text","onUpdate:modelValue":l[4]||(l[4]=d=>e(a).filters.search=d),class:"form-input filter-input",placeholder:"Search by tool name...",onKeyup:l[5]||(l[5]=N(d=>e(a).applyFilters(),["enter"]))},null,544),[[x,e(a).filters.search]])]),t("div",q,[l[12]||(l[12]=t("button",{type:"submit",class:"btn btn-primary btn-sm"}," Apply ",-1)),t("button",{type:"button",class:"btn btn-secondary btn-sm",onClick:l[6]||(l[6]=d=>e(a).clearFilters()),disabled:!e(a).hasActiveFilters}," Clear ",8,j)])])],32)]))}},H=h(z,[["__scopeId","data-v-972f7309"]]),K={class:"skeleton-container"},O={key:1,class:"skeleton skeleton-badge"},R={key:2,class:"skeleton-row"},G={__name:"LoadingSkeleton",props:{type:{type:String,default:"text",validator:u=>["text","badge","row"].includes(u)},lines:{type:Number,default:3}},setup(u){return(a,o)=>(r(),i("div",K,[u.type==="text"?(r(!0),i(y,{key:0},k(u.lines,f=>(r(),i("div",{key:f,class:"skeleton skeleton-text",style:T({width:f===u.lines?"60%":"100%"})},null,4))),128)):u.type==="badge"?(r(),i("div",O)):u.type==="row"?(r(),i("div",R,[...o[0]||(o[0]=[t("div",{class:"skeleton",style:{width:"30%",height:"20px"}},null,-1),t("div",{class:"skeleton",style:{width:"20%",height:"20px"}},null,-1),t("div",{class:"skeleton skeleton-badge"},null,-1),t("div",{class:"skeleton",style:{width:"15%",height:"20px"}},null,-1)])])):g("",!0)]))}},J=h(G,[["__scopeId","data-v-8051f09a"]]),Q={class:"card dashboard-card"},X={class:"table-container"},Y={class:"table dashboard-table"},Z={colspan:"6"},tt={key:1},et={colspan:"6"},st=["onClick"],lt={class:"tool-name"},ot=["title"],at={key:0},nt={key:1},rt={key:0,class:"table-footer"},it={__name:"ToolTable",setup(u){const a=U(),o=_();function f(p){a.push(`/vue/tools/${p.id}`)}function l(p){if(!p)return"-";try{return new Date(p).toLocaleString("en-US",{month:"short",day:"numeric",hour:"numeric",minute:"2-digit"})}catch{return p}}function d(p){return{UP:"tool-row-status-up",UP_WITH_ISSUES:"tool-row-status-up-with-issues",MAINTENANCE:"tool-row-status-maintenance",DOWN:"tool-row-status-down"}[p]||""}function C(p){return p.is_stale===!0}return(p,s)=>(r(),i("div",Q,[t("div",X,[t("table",Y,[t("thead",null,[t("tr",null,[t("th",{class:v(["sortable-header",e(o).getSortClass("name")]),onClick:s[0]||(s[0]=n=>e(o).handleSortClick("name"))},[...s[6]||(s[6]=[m(" Tool Name ",-1),t("span",{class:"sort-indicator"},null,-1)])],2),t("th",{class:v(["sortable-header",e(o).getSortClass("area")]),onClick:s[1]||(s[1]=n=>e(o).handleSortClick("area"))},[...s[7]||(s[7]=[m(" Area ",-1),t("span",{class:"sort-indicator"},null,-1)])],2),t("th",{class:v(["sortable-header",e(o).getSortClass("state")]),onClick:s[2]||(s[2]=n=>e(o).handleSortClick("state"))},[...s[8]||(s[8]=[m(" Status ",-1),t("span",{class:"sort-indicator"},null,-1)])],2),s[11]||(s[11]=t("th",null,"Issue",-1)),t("th",{class:v(["sortable-header",e(o).getSortClass("eta")]),onClick:s[3]||(s[3]=n=>e(o).handleSortClick("eta"))},[...s[9]||(s[9]=[m(" ETA to Up ",-1),t("span",{class:"sort-indicator"},null,-1)])],2),t("th",{class:v(["sortable-header",e(o).getSortClass("updated")]),onClick:s[4]||(s[4]=n=>e(o).handleSortClick("updated"))},[...s[10]||(s[10]=[m(" Last Updated ",-1),t("span",{class:"sort-indicator"},null,-1)])],2)])]),t("tbody",null,[e(o).loading?(r(),i(y,{key:0},k(5,n=>t("tr",{key:n},[t("td",Z,[b(J,{type:"row"})])])),64)):e(o).tools.length===0?(r(),i("tr",tt,[t("td",et,[b(E,{title:"No tools found",message:e(o).hasActiveFilters?"Try adjusting your filters":"No equipment has been added yet"},{default:A(()=>[e(o).hasActiveFilters?(r(),i("button",{key:0,class:"btn btn-secondary btn-sm mt-16",onClick:s[5]||(s[5]=n=>e(o).clearFilters())}," Clear Filters ")):g("",!0)]),_:1},8,["message"])])])):(r(!0),i(y,{key:2},k(e(o).tools,n=>(r(),i("tr",{key:n.id,class:v(["tool-row",[d(n.state),{stale:C(n)}]]),onClick:ft=>f(n)},[t("td",lt,c(n.name),1),t("td",null,c(n.area),1),t("td",null,[b(D,{status:n.state},null,8,["status"])]),t("td",{class:"issue-cell",title:n.issue_description},c(n.issue_description||"-"),9,ot),t("td",null,[n.eta_to_up?(r(),i("span",at,c(l(n.eta_to_up)),1)):(r(),i("span",nt,"-"))]),t("td",null,[t("span",{class:v({"stale-indicator":C(n)})},c(l(n.updated_at)),3)])],10,st))),128))])])]),!e(o).loading&&e(o).tools.length>0?(r(),i("div",rt,[s[12]||(s[12]=m(" Showing ",-1)),t("strong",null,c(e(o).meta.filtered),1),s[13]||(s[13]=m(" of ",-1)),t("strong",null,c(e(o).meta.total),1),s[14]||(s[14]=m(" tools ",-1))])):g("",!0)]))}},dt=h(it,[["__scopeId","data-v-3fc8dd7a"]]),ut={class:"dashboard-view"},pt={key:0,class:"alert alert-error"},ct={__name:"DashboardView",setup(u){const a=_();return I(()=>{a.readFiltersFromUrl(),a.fetchTools()}),(o,f)=>(r(),i("div",ut,[f[0]||(f[0]=t("div",{class:"page-header"},[t("h1",null,"Equipment Status Dashboard"),t("p",null,"Monitor and update the status of fab equipment")],-1)),e(a).error?(r(),i("div",pt,c(e(a).error),1)):g("",!0),b(H),b(dt)]))}},yt=h(ct,[["__scopeId","data-v-0cee7c58"]]);export{yt as default};
