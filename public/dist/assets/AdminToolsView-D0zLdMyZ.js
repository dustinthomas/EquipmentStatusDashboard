import{_,o as r,q as M,a as t,t as d,b as o,g as y,c,h as b,k as u,w as p,e as g,v as h,r as T,F as f,j as m,T as S,p as A,l as w,i as V}from"./index-BDGxoy4u.js";import{u as k}from"./admin-jWCykmMJ.js";import{E as x}from"./EmptyState-CjGN3KU0.js";const E={class:"modal"},N={class:"modal-header"},U={class:"modal-title"},B=["disabled"],F={class:"modal-body"},L={key:0,class:"alert alert-success"},q={key:1,class:"alert alert-error"},D={class:"form-group"},j=["disabled"],I={class:"form-group"},z=["disabled"],P={class:"form-group"},R=["disabled"],Y={class:"form-group"},G=["disabled"],H=["value"],J={key:0,class:"criticality-preview"},K={class:"modal-actions"},O=["disabled"],Q=["disabled"],W={key:0,class:"loading-spinner loading-spinner-sm"},X={__name:"ToolFormModal",setup(C){const l=k();function e(v){return`criticality-${v}`}return(v,a)=>(r(),M(S,{to:"body"},[t("div",{class:"modal-overlay",onClick:a[7]||(a[7]=y(n=>o(l).closeToolModal(),["self"]))},[t("div",E,[t("div",N,[t("h3",U,d(o(l).toolModal.mode==="create"?"Add New Tool":"Edit Tool"),1),t("button",{class:"modal-close",onClick:a[0]||(a[0]=n=>o(l).closeToolModal()),disabled:o(l).toolModal.submitting}," Ã— ",8,B)]),t("div",F,[t("form",{onSubmit:a[6]||(a[6]=y(n=>o(l).submitToolModal(),["prevent"]))},[o(l).toolModal.successMessage?(r(),c("div",L,d(o(l).toolModal.successMessage),1)):b("",!0),o(l).toolModal.error?(r(),c("div",q,d(o(l).toolModal.error),1)):b("",!0),t("div",D,[a[8]||(a[8]=t("label",{class:"form-label"},[u(" Tool Name "),t("span",{class:"required"},"*")],-1)),p(t("input",{type:"text","onUpdate:modelValue":a[1]||(a[1]=n=>o(l).toolModal.name=n),class:"form-input",placeholder:"Enter tool name",disabled:o(l).toolModal.submitting},null,8,j),[[g,o(l).toolModal.name]])]),t("div",I,[a[9]||(a[9]=t("label",{class:"form-label"},[u(" Area "),t("span",{class:"required"},"*")],-1)),p(t("input",{type:"text","onUpdate:modelValue":a[2]||(a[2]=n=>o(l).toolModal.area=n),class:"form-input",placeholder:"Enter area (e.g., Etch, Litho)",disabled:o(l).toolModal.submitting},null,8,z),[[g,o(l).toolModal.area]])]),t("div",P,[a[10]||(a[10]=t("label",{class:"form-label"},"Bay / Line",-1)),p(t("input",{type:"text","onUpdate:modelValue":a[3]||(a[3]=n=>o(l).toolModal.bay=n),class:"form-input",placeholder:"Enter bay or line (optional)",disabled:o(l).toolModal.submitting},null,8,R),[[g,o(l).toolModal.bay]])]),t("div",Y,[a[11]||(a[11]=t("label",{class:"form-label"},"Criticality",-1)),p(t("select",{"onUpdate:modelValue":a[4]||(a[4]=n=>o(l).toolModal.criticality=n),class:"form-select",disabled:o(l).toolModal.submitting},[(r(!0),c(f,null,T(o(l).validCriticalities,n=>(r(),c("option",{key:n.value,value:n.value},d(n.label),9,H))),128))],8,G),[[h,o(l).toolModal.criticality]]),o(l).toolModal.criticality?(r(),c("div",J,[t("span",{class:m(["criticality-badge",e(o(l).toolModal.criticality)])},d(o(l).toolModal.criticality),3)])):b("",!0)]),t("div",K,[t("button",{type:"button",class:"btn btn-secondary",onClick:a[5]||(a[5]=n=>o(l).closeToolModal()),disabled:o(l).toolModal.submitting}," Cancel ",8,O),t("button",{type:"submit",class:"btn btn-primary",disabled:o(l).toolModal.submitting},[o(l).toolModal.submitting?(r(),c("span",W)):b("",!0),u(" "+d(o(l).toolModal.submitting?"Saving...":o(l).toolModal.mode==="create"?"Create Tool":"Save Changes"),1)],8,Q)])],32)])])])]))}},Z=_(X,[["__scopeId","data-v-831b3984"]]),tt={class:"admin-view"},ot={key:0,class:"alert alert-error"},st={class:"card admin-toolbar"},lt={class:"admin-toolbar-row"},et={class:"admin-search-group"},at={class:"card admin-table-card"},it={class:"table-container"},nt={class:"table admin-tools-table"},dt={key:0},rt={key:1},ct={colspan:"6"},ut={class:"tool-name"},mt={class:"admin-actions-cell"},bt=["onClick"],pt=["onClick"],vt={key:0,class:"admin-table-footer"},gt={__name:"AdminToolsView",setup(C){const l=V(),e=k();A(()=>{e.switchTab("tools"),e.tools.items.length===0&&e.fetchTools()});function v(){l.push("/admin/users")}function a(n){return`criticality-${n}`}return(n,s)=>(r(),c("div",tt,[s[17]||(s[17]=t("div",{class:"page-header"},[t("h1",null,"Admin Panel"),t("p",null,"Manage tools and users")],-1)),t("div",{class:"admin-tabs"},[s[6]||(s[6]=t("button",{class:"admin-tab admin-tab-active"}," Tools ",-1)),t("button",{class:"admin-tab",onClick:v}," Users ")]),o(e).tools.error?(r(),c("div",ot,d(o(e).tools.error),1)):b("",!0),t("div",st,[t("div",lt,[t("div",et,[p(t("input",{type:"text","onUpdate:modelValue":s[0]||(s[0]=i=>o(e).tools.search=i),class:"form-input admin-search-input",placeholder:"Search tools..."},null,512),[[g,o(e).tools.search]])]),t("button",{class:"btn btn-primary",onClick:s[1]||(s[1]=i=>o(e).openAddToolModal())}," + Add Tool ")])]),t("div",at,[t("div",it,[t("table",nt,[t("thead",null,[t("tr",null,[t("th",{class:m(["sortable-header",o(e).getToolSortClass("name")]),onClick:s[2]||(s[2]=i=>o(e).handleToolSortClick("name"))},[...s[7]||(s[7]=[u(" Name ",-1),t("span",{class:"sort-indicator"},null,-1)])],2),t("th",{class:m(["sortable-header",o(e).getToolSortClass("area")]),onClick:s[3]||(s[3]=i=>o(e).handleToolSortClick("area"))},[...s[8]||(s[8]=[u(" Area ",-1),t("span",{class:"sort-indicator"},null,-1)])],2),s[11]||(s[11]=t("th",null,"Bay",-1)),t("th",{class:m(["sortable-header",o(e).getToolSortClass("criticality")]),onClick:s[4]||(s[4]=i=>o(e).handleToolSortClick("criticality"))},[...s[9]||(s[9]=[u(" Criticality ",-1),t("span",{class:"sort-indicator"},null,-1)])],2),t("th",{class:m(["sortable-header",o(e).getToolSortClass("is_active")]),onClick:s[5]||(s[5]=i=>o(e).handleToolSortClick("is_active"))},[...s[10]||(s[10]=[u(" Active ",-1),t("span",{class:"sort-indicator"},null,-1)])],2),s[12]||(s[12]=t("th",null,"Actions",-1))])]),t("tbody",null,[o(e).tools.loading?(r(),c("tr",dt,[...s[13]||(s[13]=[t("td",{colspan:"6",class:"loading-cell"},[t("div",{class:"loading-spinner"}),t("span",null,"Loading tools...")],-1)])])):o(e).filteredTools.length===0?(r(),c("tr",rt,[t("td",ct,[w(x,{title:"No tools found",message:o(e).tools.search?"Try adjusting your search":"Click Add Tool to create your first tool"},null,8,["message"])])])):(r(!0),c(f,{key:2},T(o(e).filteredTools,i=>(r(),c("tr",{key:i.id,class:m({"admin-row-inactive":!i.is_active})},[t("td",ut,d(i.name),1),t("td",null,d(i.area),1),t("td",null,d(i.bay||"-"),1),t("td",null,[t("span",{class:m(["criticality-badge",a(i.criticality)])},d(i.criticality),3)]),t("td",null,[t("span",{class:m(["active-badge",i.is_active?"active-badge-yes":"active-badge-no"])},d(i.is_active?"Yes":"No"),3)]),t("td",mt,[t("button",{class:"btn btn-secondary btn-sm",onClick:$=>o(e).openEditToolModal(i)}," Edit ",8,bt),t("button",{class:m(["btn btn-sm",i.is_active?"btn-outline-danger":"btn-outline-success"]),onClick:$=>o(e).toggleToolActive(i)},d(i.is_active?"Deactivate":"Activate"),11,pt)])],2))),128))])])]),!o(e).tools.loading&&o(e).filteredTools.length>0?(r(),c("div",vt,[s[14]||(s[14]=u(" Showing ",-1)),t("strong",null,d(o(e).filteredTools.length),1),s[15]||(s[15]=u(" of ",-1)),t("strong",null,d(o(e).tools.items.length),1),s[16]||(s[16]=u(" tools ",-1))])):b("",!0)]),o(e).toolModal.visible?(r(),M(Z,{key:1})):b("",!0)]))}},Tt=_(gt,[["__scopeId","data-v-2814293a"]]);export{Tt as default};
